<!DOCTYPE html>
<html>
<head>
<title>Special</title>
</head>
<body class="lift:content_id=main">
	<div id="main" class="lift:surround?with=default;at=content">
		<script class="lift:head" id="composeJS" src="/js/compose-post.js"
			type="text/javascript"></script>
		<script class="lift:head"
			src="http://cdn.jquerytools.org/1.2.7/form/jquery.tools.min.js"></script>
		<!-- Code Mirror Init-->
		<script class="lift:head" src="/js/codeMirror-modes.js"></script>
		<link class="lift:head" rel="stylesheet"
			href="/codemirror/theme/eclipse.css">
		<script class="lift:head" src="/codemirror/lib/codemirror.js"></script>
		<link class="lift:head" rel="stylesheet"
			href="/codemirror/lib/codemirror.css">
		<script class="lift:head" src="/codemirror/mode/clike/clike.js"></script>
		<script class="lift:head" src="/codemirror/lib/util/searchcursor.js"></script>
		<script class="lift:head"
			src="/codemirror/lib/util/match-highlighter.js"></script>
		<script class="lift:head" src="/codemirror/lib/util/loadmode.js"></script>
		<link class="lift:head" rel="stylesheet"
			href="/CSS/Default/codemirror_default.css">
		<!-- Code Mirror Init End-->
		<!-- Aloha Editor Init-->

		<link class="lift:head" rel="stylesheet" href="/aloha/css/aloha.css" type="text/css">
		<script class="lift:head" src="/aloha/lib/require.js"></script>
		<!-- 		<script class="lift:head" src="/aloha/lib/vendor/jquery-1.7.2.js"></script> -->
		<script class="lift:head" type="text/javascript">
			var editorCount = 3;
			if (window.Aloha === undefined || window.Aloha === null) {
				var Aloha = window.Aloha = {};
			}

			Aloha.settings = {
				sidebar : {
					disabled : true
				},
				plugins : {
					block : {
						defaults : {
							'.default-block' : {},
							'.columnBlock' : {
								'aloha-block-type' : 'ColumnBlock'
							},
							'.uneditableColumnBlock' : {
								'aloha-block-type' : 'UneditableColumnBlock'
							},
							'.product-teaser' : {
								'aloha-block-type' : 'ProductTeaserBlock'
							},
							'.company' : {
								'aloha-block-type' : 'CompanyBlock'
							},
							'.imageBlock' : {
								'aloha-block-type' : 'ImageBlock'
							},
							'.editableImageBlock' : {
								'aloha-block-type' : 'EditableImageBlock'
							},
							'.news-block' : {
								'aloha-block-type' : 'NewsBlock'
							},
							'.sortable-news-block' : {
								'aloha-block-type' : 'SortableNewsBlock'
							},
							'.editable-product-teaser' : {
								'aloha-block-type' : 'EditableProductTeaserBlock'
							}
						}
					}
				}
			}
		</script>
		<script class="lift:head" src="/aloha/lib/aloha-full.js"
			data-aloha-plugins="common/ui,
								common/format,
		                        common/table,
		                        common/list,
		                        common/link,
		                        common/highlighteditables,
		                        common/block,
		                        common/undo,
		                        common/image,
		                        common/contenthandler,
		                        common/paste,
		                        common/commands,
		                        common/abbr,
		                        common/align,
		                        common/horizontalruler,
		                        extra/htmlsource">
			
		</script>
		<script type="text/javascript">
			window.codeEditors = new Object();
	
			Aloha.ready(function() {

				// Make #content editable once Aloha is loaded and ready.
				Aloha.jQuery('.WYSIWYG-fields').aloha();

			});
		
		</script>
		<!-- 	<style class="lift:head">
    #sortable { list-style-type: none; margin: 0; padding: 0; width: 60%; }
    #sortable li { margin: 0 3px 3px 3px; padding: 0.4em; padding-left: 1.5em; font-size: 1.4em; height: 18px; }
    #sortable li span { position: absolute; margin-left: -1.3em; }
    </style> -->
		<script class="lift:head">
			$(function() {

				$("#editor-sort").sortable({
					handle : '.handle',
					cancel : 'h2',
					start : function(e, ui) {
						ui.placeholder.height(ui.item.height());
					}
				});

			});
		</script>
		<!-- Aloha Editor Init End-->

		
		<select id="newModeSelect"></select>
		<button id="btnAddCode">add code</button>
		<span class="separator">|</span>
		<button id="btnAddHTML">add html</button>
		<button id="btnDel">remove last</button>
		<span class="separator">|</span>		
		<button id="publish" onclick="$('#next').click();">Publish</button>
		<div id="composer-area" class="sortable">

			<!-- <div class="editable-area sortable-area">
				<h1>This is a empty post!</h1>
			</div> -->

			<!-- Form for the whole post -->
			<form class="lift:form.ajax" action="#">
				<div class="lift:post_form" id="editor_form_wrapper">
					<br>
					<h2>
							<input type="text" id="Text1" required="required"
								class="field-content title-field" name="title"
								placeholder="Post Title"></input>
					</h2>
					<br> <br>
					<div id="editor-sort">
						<div class="sortable-item">
							<div class="handle"></div>

							<button class="field-delete" onclick="window.deleteParentElement(this)"></button>
							<div id="Text2" class="field-content WYSIWYG-fields"
								contenteditable="true">
								<h3>Header</h3>
							</div>
						</div>
						<div id="Text3" class="sortable-item">
							<div class="handle"></div>
							<button class="field-delete" onclick="window.deleteParentElement(this)"></button>
							<div class="field-content code-block-fields">
								<textarea id="textArea3">
	import snippet.fun._
	
	class ReplaceMe extends SomeCode{
	    def click = {
	    	this.text.remove
	    }    
	}
							</textarea>
							</div>
						</div>
					</div>
					<div>
						<button hidden="true" id="next" value="Submit" type="button" class="btn">
							<Lift:Loc>Finish</Lift:Loc>
						</button>
					</div>
				</div>
			</form>
			<div data-lift="post_form.sendToServer">
				<script id="sendToServer"></script>
				<script id="initDynamic"></script>
			</div>
		</div>
		<script type="text/javascript">
		
			//Setup the first Code editor
			var postTextArea = document.getElementById("textArea3");
			var editor = CodeMirror.fromTextArea(postTextArea, {
				lineNumbers : true,
				mode : "text/x-scala",
				lineWrapping : "wrap",
				onCursorActivity : function() {
					editor.matchHighlight("CodeMirror-matchhighlight");
				}
			});
			window.codeEditors["textArea3"] = editor;

		</script>
	</div>
</body>
</html>
